<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>栗安LiAN</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.css"> -->
    <link rel="stylesheet" type="text/css" href="./fullpage.min.css" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&display=swap" rel="stylesheet">
</head>

<body oncontextmenu="return false;" ondragstart="return false;">
    <div id="loading"></div>
    <div id="fullpage">
        <div class="section">
            <div class="intro">
                <div id="line"></div>
                <div id="textContainer" class="hidden">
                    LiAN OFFICIAL
                </div>
                <div id="witch">
                    女巫
                </div>
                <div id="witch_2">
                    魔女
                </div>
                <!-- <div><img src="./intro_1.jpg" alt="" class="intro_img"></div> -->
                <div class="container">
                    <div class="content">
                        <div class="ml3">栗安 X LiAN OFFICIAL</div>
                    </div>
                </div>
                <!-- <div class="intro_text_2">
                    放过自己！放过自己！<br>
                    放过自己！放过自己！放过自己！<br>
                    放过！放过！放过！<br>
                    开玩笑的！
                </div> -->

                <!-- <div class="split-color-text">你好世界!</div> -->
            </div>

        </div>
        <div class="section">
            <!-- <div id="line"></div>
            <div id="textContainer" class="hidden">
                LiAN OFFICIAL
            </div> -->
            <div class="line"></div>
            <div class="textContainer">
                LiAN OFFICIAL
            </div>
            <div class="about">ABOUT</div>
            <div class="about_text_container">
                <div class="about_text">
                    名字：栗安LiAN 性别：女
                </div>
                <div class="about_text_1">
                    年龄：秘密/身高：155/职业：女巫/兴趣：唱歌、吃肉肉、和美少女贴贴
                </div>
                <div class="about_text_2">
                    直播时间：通常每晚九点开播，白天随机掉落（具体请见周表）<br>
                    直播内容：杂谈、画画、唱歌、单机游戏
                    <br><br>
                    角色背景：我是来自异次元一个美丽小森林的女巫！现在寄居在这个世界的人类家人家里。<br>
                    这里的好吃的也太多了吧！为了吃更多肉肉，开始了打工之旅~
                </div>

            </div>
            <img src="./intro_1.jpg" alt="" class="intro_img">
        </div>
        <div class="section">
            <div class="line"></div>
            <div class="textContainer">
                LiAN OFFICIAL
            </div>
            <div class="song_topic">SING<br>THE<br>SONG</div>
            <a href="../index.html" class="go_songlist">前往歌单</a>
            <div class="slide">
                <div class="song-wrap">
                    <div class="song-disc">
                        <div class="song-disc__bg"></div>
                        <div class="song_text">第一首歌</div>
                        <div class="song-disc__cover">
                            <div class="song-img">
                                <img src="./moon.jpg" alt="" class="u-img">
                            </div>
                        </div>
                        <div class="play-btn"></div>
                        <div class="song-needle"></div>
                        <audio class="song-audio" src="./1.mp3"></audio> <!-- 添加音频文件 -->
                    </div>
                </div>
            </div>
            <div class="slide">
                <div class="song-wrap">
                    <div class="song-disc">
                        <div class="song-disc__bg"></div>
                        <div class="song_text">第二首歌</div>
                        <div class="song-disc__cover">
                            <div class="song-img">
                                <img src="./moon.jpg" alt="" class="u-img">
                            </div>
                        </div>
                        <div class="play-btn"></div>
                        <div class="song-needle"></div>
                        <audio class="song-audio" src="./1.mp3"></audio> <!-- 添加音频文件 -->
                    </div>
                </div>
            </div>
            <div class="slide">
                <div class="song-wrap">
                    <div class="song-disc">
                        <div class="song-disc__bg"></div>
                        <div class="song_text">第三首歌</div>
                        <div class="song-disc__cover">
                            <div class="song-img">
                                <img src="./moon.jpg" alt="" class="u-img">
                            </div>
                        </div>
                        <div class="play-btn"></div>
                        <div class="song-needle"></div>
                        <audio class="song-audio" src="./1.mp3"></audio> <!-- 添加音频文件 -->
                    </div>
                </div>
            </div>
        </div>
        <div class="section">Section 3</div>
        <div class="section">Section 4</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.js"></script> -->
    <script type="text/javascript" src="./fullpage.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"
        integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
    <script>
        const discs = document.querySelectorAll('.song-disc');
        const audios = document.querySelectorAll('.song-audio');

        discs.forEach((disc, index) => {
            const audio = audios[index];
            const songNeedle = disc.querySelector('.song-needle');
            const songImg = disc.querySelector('.song-img');
            const playBtn = disc.querySelector('.play-btn');

            disc.addEventListener('click', function () {
                // 如果当前音频播放，暂停它，否则播放它
                if (audio.paused) {
                    // 暂停其他的音乐和动画
                    audios.forEach((otherAudio, otherIndex) => {
                        if (otherIndex !== index) {
                            otherAudio.pause();
                            discs[otherIndex].querySelector('.song-needle').classList.remove('play');
                            discs[otherIndex].querySelector('.song-img').classList.remove('play');
                            discs[otherIndex].querySelector('.play-btn').classList.remove('play');
                        }
                    });

                    audio.play();
                    songNeedle.classList.add('play');
                    songImg.classList.add('play');
                    playBtn.classList.add('play');
                } else {
                    audio.pause();
                    songNeedle.classList.remove('play');
                    songImg.classList.remove('play');
                    playBtn.classList.remove('play');
                }
            });

            // 当音频播放完成时，重置动画状态
            audio.addEventListener('ended', function () {
                songNeedle.classList.remove('play');
                songImg.classList.remove('play');
                playBtn.classList.remove('play');
            });
        });

        $(document).ready(function () {
            const loading = document.getElementById("loading");
            loading.style.zIndex = "-1";
            var textWrapper = document.querySelector('.ml3');
            textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

            // 第一个动画
            var firstAnimation = anime.timeline({ loop: false })
                .add({
                    targets: '.ml3 .letter',
                    opacity: [0, 1],
                    easing: "easeInOutQuad",
                    duration: 2250,
                    delay: (el, i) => 150 * (i + 1)
                });

            // 监听第一个动画的完成事件
            firstAnimation.finished.then(function () {
                // 第一个动画完成后，执行第二个动画
                const textContainer = document.getElementById("textContainer");
                const line = document.getElementById("line");
                const witch = document.getElementById("witch");
                const witch_2 = document.getElementById("witch_2");
                // Simple delay to show the second animation. You can change the delay as needed.
                setTimeout(() => {
                    textContainer.classList.remove("hidden");
                    textContainer.classList.add("shown");
                    line.style.top = "50%";
                    witch.style.fontSize = "350px";
                    witch.style.opacity = "1";
                    witch_2.style.fontSize = "350px";
                    witch_2.style.opacity = "1";
                }, 3500);
            });
        });
        new fullpage('#fullpage', {
            // licenseKey: 'OPEN-SOURCE-GPLV3-LICENSE',
            navigation: true,
            // other fullpage options can be added here
            slidesNavigation: true,
            afterLoad: function (origin, destination, direction) {
                if (destination.index === 1) { // 第二页的索引为1
                    showSkills();
                }
            },
            onLeave: function (origin, destination, direction) {
                if (origin.index === 1) { // 当从第二页离开时
                    resetSkills();
                }
            },
        });
        function showSkills() {
            const skills = document.querySelectorAll('.skill');
            skills.forEach(skill => {
                skill.classList.remove('visible');
            });
            skills.forEach((skill, index) => {
                setTimeout(() => {
                    skill.classList.add('visible');
                }, index * 150); // 每100毫秒显示一个技能
            });
        };
        function resetSkills() {
            const skills = document.querySelectorAll('.skill');
            skills.forEach(skill => {
                skill.classList.remove('visible');
            });
        };
    </script>
    <script src="script.js"></script>
</body>

</html>